---
import Layout from '../../layouts/Layout.astro';

// Static list of tools - each tool is in its own isolated repository
// Update this list when adding new tools
const tools = [
  {
    name: 'sqlite-csv-playground',
    title: 'SQLite CSV Playground Pro',
    description: 'Execute SQL queries and analyze CSV data directly in your browser with support for query chaining, visual query building, and real-time autocomplete.',
    url: 'https://rynf1t.github.io/sqlite-csv-playground/',
    repo: 'https://github.com/rynf1t/sqlite-csv-playground',
    type: 'html'
  },
  {
    name: 'slack-formatter',
    title: 'Slack Formatter',
    description: 'Converts Markdown formatting into Slack-compatible text with HTML clipboard support for pasting into Slack, Google Docs, and other applications.',
    url: 'https://rynf1t.github.io/slack-formatter/',
    repo: 'https://github.com/rynf1t/slack-formatter',
    type: 'html'
  },
  {
    name: 'coin-flip',
    title: 'Coin Flip',
    description: 'Randomly generates a coin flip result with retro arcade-style animation and visual feedback showing heads or tails.',
    url: 'https://rynf1t.github.io/coin-flip/',
    repo: 'https://github.com/rynf1t/coin-flip',
    type: 'html'
  },
  {
    name: 'slackfmt',
    title: 'slackfmt',
    description: 'Convert Markdown to Slack-compatible HTML format for pasting into Slack, Google Docs, and other apps that recognize HTML clipboard format.',
    url: 'https://rynf1t.github.io/slackfmt/',
    repo: 'https://github.com/rynf1t/slackfmt',
    type: 'cli'
  }
];

// Separate tools by type
const htmlTools = tools.filter(t => t.type === 'html');
const cliTools = tools.filter(t => t.type === 'cli');
---

<Layout title="Tools">
  <h1>Tools</h1>

  <nav class="tools-nav">
    <a href="#html-tools">HTML Tools</a>
    <a href="#cli-tools">CLI Tools</a>
  </nav>

  <input
    type="search"
    id="search"
    placeholder="Search tools..."
    style="width: 100%; padding: 0.5rem; margin-bottom: 2rem; font-family: 'Times New Roman', Times, serif; font-size: 1rem; border: 1px solid #ddd; border-radius: 4px;"
  />

  <section id="html-tools">
    <h2>HTML Tools</h2>
    {htmlTools.length === 0 ? (
      <p>No HTML tools yet.</p>
    ) : (
      <ul class="tools-list" id="html-tools-list">
        {htmlTools.map(tool => (
          <li class="tool-item" data-title={tool.title.toLowerCase()} data-description={tool.description?.toLowerCase() || ''}>
            <a href={tool.url} target="_blank" rel="noopener noreferrer">{tool.title}</a>
            {tool.description && <span class="description"> — {tool.description}</span>}
            <a href={tool.repo} class="github-link" target="_blank" rel="noopener noreferrer">[see code]</a>
            <a href={tool.repo} class="clone-link" target="_blank" rel="noopener noreferrer" title="Clone this tool locally">[clone]</a>
          </li>
        ))}
      </ul>
    )}
  </section>

  <section id="cli-tools" style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #ddd;">
    <h2>CLI Tools</h2>
    {cliTools.length === 0 ? (
      <p>No CLI tools yet.</p>
    ) : (
      <ul class="tools-list" id="cli-tools-list">
        {cliTools.map(tool => (
          <li class="tool-item" data-title={tool.title.toLowerCase()} data-description={tool.description?.toLowerCase() || ''}>
            <a href={tool.url} target="_blank" rel="noopener noreferrer">{tool.title}</a>
            {tool.description && <span class="description"> — {tool.description}</span>}
            <a href={tool.repo} class="github-link" target="_blank" rel="noopener noreferrer">[see code]</a>
            <a href={tool.repo} class="clone-link" target="_blank" rel="noopener noreferrer" title="Clone this tool locally">[clone]</a>
          </li>
        ))}
      </ul>
    )}
  </section>

  <script>
    const search = document.getElementById('search') as HTMLInputElement | null;
    const htmlToolsList = document.getElementById('html-tools-list');
    const cliToolsList = document.getElementById('cli-tools-list');
    const htmlItems = htmlToolsList?.querySelectorAll('.tool-item') as NodeListOf<HTMLElement> | undefined;
    const cliItems = cliToolsList?.querySelectorAll('.tool-item') as NodeListOf<HTMLElement> | undefined;
    const allItems = [...(htmlItems || []), ...(cliItems || [])];

    search?.addEventListener('input', (e) => {
      const query = (e.target as HTMLInputElement).value.toLowerCase();
      allItems.forEach(item => {
        const title = item.dataset.title || '';
        const description = item.dataset.description || '';
        const matches = title.includes(query) || description.includes(query);
        item.style.display = matches ? '' : 'none';
      });
    });
  </script>
</Layout>

<style>
  .tools-nav {
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #ddd;
  }

  .tools-nav a {
    color: #1a1a1a;
    text-decoration: none;
    margin-right: 1.5rem;
    font-family: 'Times New Roman', Times, serif;
    font-size: 1rem;
  }

  .tools-nav a:hover {
    text-decoration: underline;
  }

  section h2 {
    margin-top: 0;
    margin-bottom: 1rem;
    font-size: 1.5rem;
  }

  .tools-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .tool-item {
    margin-bottom: 0.75rem;
    line-height: 1.6;
  }

  .tool-item a {
    color: #0066cc;
    text-decoration: none;
    font-weight: bold;
  }

  .tool-item a:hover {
    text-decoration: underline;
  }

  .description {
    color: #666;
  }

  .tool-item .github-link,
  .tool-item .clone-link {
    color: #0066cc !important;
    text-decoration: none;
    font-size: 0.9em;
    margin-left: 0.5rem;
  }

  .tool-item .github-link:hover,
  .tool-item .clone-link:hover {
    text-decoration: underline;
  }
</style>
